
///	Universal import definitions / functions are shown here
///	PCBPB_Universal.cbp

//<Regular Defines
DEFINE $s$ minecraft:
DEFINE $ObjA$ scoreboard objectives add
DEFINE $ObjR$ scoreboard objectives remove
DEFINE $TeamA$ scoreboard teams add
DEFINE $TeamO$ scoreboard teams option
DEFINE $TeamR$ scoreboard teams remove

DEFINE Deactivate fill |0| stonebrick 0
DEFINE Activate fill |0| redstone_block 0
DEFINE ColorFillWool fill |0| wool |1|
DEFINE ColorFillClay fill |0| stained_hardened_clay |1|
DEFINE ColorFillGlass fill |0| stained_glass |1|
DEFINE ColorFillWood fill |0| planks |1|
DEFINE ScTG scoreboard players tag
DEFINE ScOP scoreboard players operation
DEFINE ScTE scoreboard players test
DEFINE ScRE scoreboard players reset
DEFINE ScEN scoreboard players enable
DEFINE ScTJ scoreboard teams join
DEFINE ScTL scoreboard teams leave
DEFINE RevST scoreboard players tag @a[|0|] remove |0|
DEFINE ExecuteSpawnStand @e[type=ArmorStand,SpawnStand,SPgam=0]
DEFINE FinalSpawnStand @e[type=ArmorStand,SpawnStand,SPgam=0] SPgam = PARSE($SPid$)
DEFINE NumberAdd |0| Number = |0|
DEFINE NumberObjAdd Number dummy

DEFINE Snd_Pling minecraft:block.note.pling
DEFINE Snd_XP minecraft:entity.experience_orb.touch
DEFINE Snd_Item minecraft:entity.item.pickup
DEFINE Snd_TP minecraft:entity.endermen.teleport
DEFINE Snd_Wither minecraft:entity.wither.death
DEFINE Snd_Level minecraft:entity.player.levelup
DEFINE Snd_Explode minecraft:entity.generic.explode
//>

//<SpawnPoint System
FUNC Func_SpawnIDSetting
	@a[$SA$] SPid + 0
	@a[$SA$,SPid<-$SPid$] SPid = $SPid$
	@a[$SA$,SPid>-$SPid$] SPid = $SPid$
END

FUNC Func_SpawnStandStart
	@e[type=ArmorStand,SpawnStand] SPtp = $SPid$
	@e[type=ArmorStand,SpawnStand] SPpvp = $SPpvp$
	@e[type=ArmorStand,SpawnStand] SPsat = $SPsat$
	@e[type=ArmorStand,SpawnStand] SPgmd = 1
	@e[type=ArmorStand,SpawnStand,SPgam>=1] SPgac = 1
END

FUNC Func_SpawnStandEnd
	@e[type=ArmorStand,SpawnStand] SPtp = 0
	@e[type=ArmorStand,SpawnStand] SPpvp = 0
	@e[type=ArmorStand,SpawnStand] SPsat = 1
	@e[type=ArmorStand,SpawnStand] SPgmd = 1
	@e[type=ArmorStand,SpawnStand,SPgam=$SPid$] SPgam = 0
	@e[type=ArmorStand,SpawnStand] SPwea = 0
END

FUNC Func_SpawnStandEdit
	@e[type=ArmorStand,SpawnStand] SPtp = |0|
	@e[type=ArmorStand,SpawnStand] SPpvp = |1|
	@e[type=ArmorStand,SpawnStand] SPsat = |2|
	@e[type=ArmorStand,SpawnStand] SPgmd = |3|
	@e[type=ArmorStand,SpawnStand,SPgam>=1] SPgac = 1
	@e[type=ArmorStand,SpawnStand] SPwea = |4|
END
//>

//<Countdown
DEFINE DEF_ExecuteCountdown @e[type=AreaEffectCloud,PARSE($Name$)Countdown,|0|=|1|]

///	Parameters = Duration
FUNC Func_UniversalCountdownStart
	ExecuteSpawnStand summon AreaEffectCloud ~ ~ ~ {Tags:["$Name$Entity","$Name$Countdown"],Duration:|0|}
END

///	Parameters = End msg, Countdown obj name, Disp obj name
FUNC Func_UniversalCountdownExtendedClock
	testfor @e[type=AreaEffectCloud,$Name$Countdown]
	SetblockTestfor
	
	@e[type=AreaEffectCloud,$Name$Countdown] |1| + 1
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=1] Countdown |2| = 6
	
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=20] @a[$SA$] playsound Snd_Pling voice @a[c=1] ~ ~ ~ 0.5
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=20] tellraw @a[$SA$] $TextStart${"text":"5","color":"yellow","bold":"true"}]}
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=20] Countdown |2| = 5
	
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=40] @a[$SA$] playsound Snd_Pling voice @a[c=1] ~ ~ ~ 1
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=40] tellraw @a[$SA$] $TextStart${"text":"4","color":"yellow","bold":"true"}]}
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=40] Countdown |2| = 4
	
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=60] @a[$SA$] playsound Snd_Pling voice @a[c=1] ~ ~ ~ 1.5
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=60] tellraw @a[$SA$] $TextStart${"text":"3","color":"yellow","bold":"true"}]}
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=60] Countdown |2| = 3
	
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=80] @a[$SA$] playsound Snd_Pling voice @a[c=1] ~ ~ ~ 2
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=80] tellraw @a[$SA$] $TextStart${"text":"2","color":"yellow","bold":"true"}]}
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=80] Countdown |2| = 2
	
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=100] @a[$SA$] playsound Snd_Pling voice @a[c=1] ~ ~ ~ 2
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=100] tellraw @a[$SA$] $TextStart${"text":"1","color":"yellow","bold":"true"}]}
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=100] Countdown |2| = 1
	
	@e[type=AreaEffectCloud,$Name$RaceCD,$Name$RaceCD=120] title @a[$SA$] title {"text":"|0|!","color":"green"}
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=120] ScRE Countdown |2|
END

///	Parameters = End msg, Countdown obj name
FUNC Func_UniversalCountdownClock
	testfor @e[type=AreaEffectCloud,$Name$Countdown]
	SetblockTestfor
	
	@e[type=AreaEffectCloud,$Name$Countdown] |1| + 1
	
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=20] @a[$SA$] playsound Snd_Pling voice @a[c=1] ~ ~ ~ 0.5
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=20] tellraw @a[$SA$] $TextStart${"text":"5","color":"yellow","bold":"true"}]}
	
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=40] @a[$SA$] playsound Snd_Pling voice @a[c=1] ~ ~ ~ 1
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=40] tellraw @a[$SA$] $TextStart${"text":"4","color":"yellow","bold":"true"}]}
	
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=60] @a[$SA$] playsound Snd_Pling voice @a[c=1] ~ ~ ~ 1.5
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=60] tellraw @a[$SA$] $TextStart${"text":"3","color":"yellow","bold":"true"}]}
	
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=80] @a[$SA$] playsound Snd_Pling voice @a[c=1] ~ ~ ~ 2
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=80] tellraw @a[$SA$] $TextStart${"text":"2","color":"yellow","bold":"true"}]}
	
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=100] @a[$SA$] playsound Snd_Pling voice @a[c=1] ~ ~ ~ 2
	@e[type=AreaEffectCloud,$Name$Countdown,|1|=100] tellraw @a[$SA$] $TextStart${"text":"1","color":"yellow","bold":"true"}]}
	
	@e[type=AreaEffectCloud,$Name$RaceCD,$Name$RaceCD=120] title @a[$SA$] title {"text":"|0|!","color":"green"}
END
//>

//<XP
FUNC Func_UniversalXPGeneralClock
	$s$kill @e[$SA$,type=XPOrb]
	$s$xp -2147483648L @a[$SA$,m=2]
END

///	Parameters = Obj name
FUNC Func_UniversalXPBarClock
	$s$xp 1129L @a[$SA$,m=2,|0|>=0]
	$s$xp 11 @a[$SA$,m=2,|0|>=0]
	LOOP 64 1 / 2 () 6336 99 / 2
		$s$xp |2| @a[$SA$,m=2,|0||1|>=|0|]
		@a[$SA$,m=2,|0||1|>=|0|] |0||1| - |0|
	END
	$s$xp -1129L @a[$SA$,m=2,|0|>=0]
	@a[$SA$,m=2,|0|>=0] |0| = 0
END

///	Parameters = Obj name, num to start division (eg. 128)
FUNC Func_UniversalXPNumClock
	LOOP |1| 1 / 2
		$s$xp |0|L @a[$SA$,m=2,|0||1|>=|0|]
		@a[$SA$,m=2,|0||1|>=|0|] |0||1| - |0|
	END
	@a[$SA$,m=2,|0|>=0] |0| = 0
END
//>












